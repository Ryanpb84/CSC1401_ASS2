<html>
    <head>
      <meta charset="UTF-8">
        <title>CSC1401 Assignment 2 Personal Gpa Calculator</title>
           <script>
           
		   // Setup functions used in the code

		   function getSum(a, b) {
				return a + b; 
			 }
  			function getAvg(scoreArray) {
    			return (scoreArray.reduce(getSum) / scoreArray.length);
			}

			function prompt_for_class(reenter) {

				if (reenter == 1) {
					strClass = prompt('Please enter a correct course code');
				} else {
					strClass = prompt('Please enter a course code');
				}
				
				studClassString = strClass.substring(0,3);
				studClassNum = strClass.substring(3,7);	
				return {String: studClassString, Num: studClassNum}
			}
			

		   //Setup constants and variables used in the code
			
			const COURSEGPA = [1.5,3,4,5,6,7];
			const SPEDS = /[ !@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]/
           
			var classArray = [];
			var studentScore = (0);
			var scoreArray = [];
			var moreCourse = true;
			var maxScore = 0;
			var minScore = 0;
			var maxScoreCourse = '';
			var minScoreCourse = '';
			var averageGpa = (0);
			var gpaTwoDecimal = (0);

			//Write the titles for the table columns and setup the table

			document.writeln('<table border="3">');
			document.writeln('<td>','Course Code', '</td>');
			document.writeln('<td>','Course Score' ,'</td>');
			document.writeln('</tr>');

			//enter the course code and check for errors in entering the course

			while (moreCourse) {	
				studClass = prompt_for_class(0)



				while (!isNaN (studClass.String)|| studClass.String != studClass.String.toUpperCase() ||
					isNaN (studClass.Num) || (studClass.String +studClass.Num).length != 7 || SPEDS.test(strClass) || 
					studClass.Num < 1000) {
					studClass = prompt_for_class(1)
					}
					
				classArray.push(studClass.String + studClass.Num)	

				//enter the course score and check for errors when entering the score

				studentScore = parseFloat(prompt('Please enter your course score'));
				
				while (COURSEGPA.indexOf(studentScore) == -1) {
					studentScore = parseFloat(prompt('Please enter your course score, correctly'));
				}
				
				scoreArray.push(parseFloat(studentScore));

				//write the course code and course score to the table, check to see if user wants to input
				//another course

				document.writeln('</tr>');
				document.writeln('<td>', (studClass.String +studClass.Num) ,'</td>');
				document.writeln('<td>', studentScore ,'</td>');

				moreCourse = confirm("Would you like to add another course?");
			}

			//calculate the highest scoring course and lowest scoring course

			maxScore = Math.max(...scoreArray);
			minScore = Math.min(...scoreArray);
			maxScoreCourse = classArray[scoreArray.indexOf(maxScore)];
			minScoreCourse = classArray[scoreArray.indexOf(minScore)];
     		averageGpa = getAvg(scoreArray);
			gpaTwoDecimal = averageGpa.toFixed(1)
			
			//write the statistics part of the courses entered to a list

			document.writeln('<h1>', "Statistics",'</h1>');
			document.writeln('<li>', "Number of courses", " ", classArray.length , '</li>');
			document.writeln('<li>', "Course with the highest grade value:", " " , maxScoreCourse, '</li>');
			document.writeln('<li>', "Course with the lowest grade value:" , " " , minScoreCourse, '</li>');	
			document.writeln('<li>', "Grade point average (GPA) is", " " , gpaTwoDecimal , '</li>');


           </script>
    </head>

      <body>
      
      </body>
</html>


